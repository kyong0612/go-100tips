# 20230920

## 文字列

- 以下の内容を理解する
  - Goのルーンの基本概念を理解する
  - 文字列の反復処理とトリミングでよくある間違いを防ぐ
  - 文字列の連結や無駄な変換による非効率なコードを避ける
  - 部分文字列でのメモリリークを避ける

## ルーンの概念を理解していない

- 文字セット(charset)とエンコーディングの違いを理解する
- 文字セットとは、その名のとおり、文字の集合のこと
  - 例えば、Unicodeの文字セットは2^21個の文字を含む
- エンコーディングとは、文字のリストを2進数で翻訳したもの
  - たとえばUTF-8は、すべてのUnicode文字を可変なバイト数(1バイトから4バイト)でエンコーディングできる企画
- Unicodeのコードポイントは21ビットであり、Goでは、コードポイントを保持するためのルーンはint32のエイリアスになっている

```go
type rune = int32
```

- Goの文字列は常にUTF-8ではない

```go
s := "hello"
fmt.println(len(s)) // 5
```

- sに文字リテラル(文字列定数)を代入している。GoではソースコードはUTF-8でエンコードされる
- したがって文字リテラルは全てUTF-8に基づいているわけではない

```go
s := "漢"
fmt.println(len(s)) // 3
```

- このコード例は、1ではなく3を表示する
- 実際、文字列に対してlen組込み関数を適用すると、文字数ではなく、バイト数が返される
